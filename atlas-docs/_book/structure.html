
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Project structure Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="usage_of_atlas_androidStudio_plugin" />
    
    
    <link rel="prev" href="create_first_app.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Atlas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Overview.html">
            
                <a href="Overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="FAQ.html">
            
                <a href="FAQ.html">
            
                    
                    Frequently asked questions(FAQs)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="code_sample.html">
            
                <a href="code_sample.html">
            
                    
                    Code samples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Getting started
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="create_first_app.html">
            
                <a href="create_first_app.html">
            
                    
                    create your first Atlas app
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.2" data-path="structure.html">
            
                <a href="structure.html">
            
                    
                    Project structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="usage_of_atlas_androidStudio_plugin">
            
                <span>
            
                    
                    Instant build
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="./">
            
                <a href="./">
            
                    
                    App upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Guides(waitingfor update)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Best practices for user experience(waiting for update)
            
                </span>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Project structure</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="project-structure">Project structure</h1>
<p>This page describes the various modules contained within an atlas app project. You should already understand concepts like aar, bundle, feature awb, and maindex. For a review of these concepts, see the Overview.</p>
<h2 id="structure-of-a-basic-atlas-app">Structure of a basic Atlas app</h2>
<p><strong>figure 1 </strong> shows a basic apk build from atlas project,apk structure as follow:
<img src="img/apk.png" alt=""></p>
<pre><code>1.we put all bundle files in lib/armeabi directory ,android system help us to release them in app lib directory.

2.such as libcom_....so,this is a bundle like a single apk ,contains dex,resources,and androidmanifest.
</code></pre><h2 id="structure-of-atlas-project">Structure of Atlas project</h2>
<p><strong>figure 1 </strong> shows main project how to build a atlas apk File like figure 1:</p>
<p>1.apply plugins:</p>
<pre><code>apply plugin: &apos;com.android.application&apos;
apply plugin: &apos;com.taobao.atlas&apos;
or
apply plugin: &apos;com.taobao.atlas.application&apos;
</code></pre><p>2.dependencies in one project:</p>
<pre><code>bundleCompile project(&apos;:firstbundle&apos;)
bundleCompile project(&apos;:secondbundle&apos;)
bundleCompile project(&apos;:remotebundle&apos;)
bundleCompile project(&apos;:publicbundle&apos;)
bundleCompile project(&apos;:databindbundle&apos;)
or
</code></pre><p>download dependencies from server</p>
<pre><code>bundleCompile &apos;com.taobao.android:publicbundle:1.0.0@awb&apos;
</code></pre><p>3.define only on application name and packageName in androidManifest:</p>
<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;com.taobao.demo&quot;&gt;

    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;

    &lt;application
        android:name=&quot;.DemoApplication&quot;
        android:allowBackup=&quot;true&quot;
        android:icon=&quot;@mipmap/ic_launcher&quot;
        android:label=&quot;Atlas&quot;
        android:supportsRtl=&quot;true&quot;&gt;
</code></pre><p>applicationName is not essential,android.taobao.atlas.startup.AtlasBridgeApplication will be generated dynamic for the startup application when build for atlas apk.</p>
<p><strong>figure 2 </strong> bundle project</p>
<p>1.build.gradle defination like this:</p>
<pre><code>apply plugin: &apos;com.android.library&apos;
apply plugin: &apos;com.taobao.atlas&apos;

define atlas Extension:

atlas {
    bundleConfig {
        awbBundle true
    }

}

./gradlew assembleDebug can build awb package.
</code></pre><p>2.bundle project you can define your own application and your own pacakgeName, application oncreate method will be excuted when this bundle is using by Customers</p>
<p>atlas framework can dynamic install this bundle at the same time</p>
<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;com.taobao.firstbundle&quot;&gt;

    &lt;application
        android:name=&quot;.FirstbundleApplication&quot;
        android:allowBackup=&quot;true&quot;
        android:supportsRtl=&quot;true&quot;&gt;
        &lt;activity
            android:name=&quot;.FirstBundleActivity&quot;
            android:theme=&quot;@style/AppTheme.NoActionBar&quot; /&gt;

        &lt;service
            android:name=&quot;.FirstBundleService&quot;
            android:enabled=&quot;true&quot;
            android:exported=&quot;true&quot; /&gt;

        &lt;activity android:name=&quot;.WebViewDemoActivity&quot;
            android:theme=&quot;@style/AppTheme.NoActionBar&quot;&gt;&lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre><p>3.when you want to import class from other bundles,you should define bundle dependencies in bundleBaseInfoFile.json ,when use this bundle in runtime,atlas framwork check dependency bundle first while dependency class load from dependency bundle,This would create a bad performce impression.</p>
<p>so it is not suggest way for interactive from diffrent bundles, aidi is recommended,bundleBaseInfoFile.json format:</p>
<pre><code>{
  &quot;name&quot;: &quot;&#x7B2C;&#x4E00;&#x4E2A;bundle&quot;,
  &quot;dependency&quot;: [&quot;com.taobao.publicBundle&quot;]
}
</code></pre><p>4.run ./gradlew assembleR ,firstBundle-release.awb is what we want.</p>
<p><img src="img/bundle.png" alt=""></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="create_first_app.html" class="navigation navigation-prev " aria-label="Previous page: create your first Atlas app">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="usage_of_atlas_androidStudio_plugin" class="navigation navigation-next " aria-label="Next page: Instant build">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Project structure","level":"1.5.2","depth":2,"next":{"title":"Instant build","level":"1.5.3","depth":2,"path":"usage_of_atlas_androidStudio_plugin","ref":"usage_of_atlas_androidStudio_plugin","articles":[]},"previous":{"title":"create your first Atlas app","level":"1.5.1","depth":2,"path":"create_first_app.md","ref":"create_first_app.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"structure.md","mtime":"2017-09-11T02:11:39.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-09-11T02:34:55.686Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

